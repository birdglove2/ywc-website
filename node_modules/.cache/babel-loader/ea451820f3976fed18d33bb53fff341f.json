{"ast":null,"code":"import _objectSpread from\"/Users/birddddddddd/Desktop/ywc-web/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/birddddddddd/Desktop/ywc-web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect,useContext}from\"react\";import{webData}from\"../data\";import\"./Body.css\";import Merchant from\"./Merchant\";import{UserContext}from\"../UserContext\";import{faMapMarkerAlt}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import Modal from\"react-modal\";function Body(){// from JSON\nvar categories=webData.categories;// const provinces = webData.provinces;\nvar priceRange=webData.priceRange;var merchants=webData.merchants;// set all cate\nvar allCate=[];for(var i=0;i<webData.categories.length;i++){if(webData.categories.length>1){for(var j=0;j<webData.categories[i].subcategories.length;j++){allCate.push(webData.categories[i].subcategories[j]);}}}// States\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),categoryNameNow=_useState2[0],setCategoryNameNow=_useState2[1];var _useState3=useState(webData.categories[0]),_useState4=_slicedToArray(_useState3,2),categoryNow=_useState4[0],setCategoryNow=_useState4[1];var _useState5=useState({name:\"ทั้งหมด\",subcategories:allCate}),_useState6=_slicedToArray(_useState5,2),allCategory=_useState6[0],setAllCategory=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),subcategoryNameNow=_useState8[0],setSubcategoryNameNow=_useState8[1];var _useState9=useState(\"0\"),_useState10=_slicedToArray(_useState9,2),priceSelected=_useState10[0],setPriceSelected=_useState10[1];var _useState11=useState(webData.merchants),_useState12=_slicedToArray(_useState11,2),displayMerchant=_useState12[0],setDisplayMerchant=_useState12[1];var _useContext=useContext(UserContext),state=_useContext.state,setState=_useContext.setState;useEffect(function(){setDisplayMerchant(webData.merchants.filter(function(merchant){return merchant.shopNameTH.toLowerCase().includes(state.search.toLowerCase());}));},[state.search]);useEffect(function(){setDisplayMerchant(webData.merchants.filter(function(merchant){return merchant.subcategoryName.toLowerCase().includes(subcategoryNameNow.toLowerCase());}));},[subcategoryNameNow]);// display subcategoy for each categotry you chose\nuseEffect(function(){switch(categoryNameNow){case\"ร้านอาหารและเครื่องดื่ม\":setCategoryNow(webData.categories[0]);break;case\"ร้านค้า OTOP\":setCategoryNow(webData.categories[1]);break;case\"ร้านธงฟ้า\":setCategoryNow(webData.categories[2]);break;case\"สินค้าทั่วไป\":setCategoryNow(webData.categories[3]);break;default:setCategoryNow(allCategory);}},[categoryNameNow]);useEffect(function(){var display=[];if(priceSelected===\"0\"){webData.merchants.map(function(merchant){display.push(merchant);});}else{merchants.map(function(merchant){if(priceSelected===merchant.priceLevel.toString()){display.push(merchant);}});}setDisplayMerchant(display);},[priceSelected]);useEffect(function(){var display=[];if(state.provinceSelected===\"0\"){webData.merchants.map(function(merchant){display.push(merchant);});}else{merchants.map(function(merchant){if(state.provinceSelected===merchant.addressProvinceName){display.push(merchant);}});}setDisplayMerchant(display);},[state.provinceSelected]);var categoryChangeHandler=function categoryChangeHandler(e){setCategoryNameNow(e.target.value);};var subcategoryChangeHandler=function subcategoryChangeHandler(e){setSubcategoryNameNow(e.target.value);};var provinceChangeHandler=function provinceChangeHandler(e){setState(_objectSpread(_objectSpread({},state),{},{provinceSelected:e.target.value}));};var priceChangeHandler=function priceChangeHandler(e){setPriceSelected(e.target.value);};var eachCate=categories.map(function(category){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"chooseOneCategory\",value:category.name,onChange:categoryChangeHandler}),/*#__PURE__*/_jsx(\"span\",{children:category.name})]});});var categoryBody=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"chooseOneCategory\",value:\"\",onChange:categoryChangeHandler,defaultChecked:true}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"}),eachCate]});var eachsubcate;eachsubcate=categoryNow.subcategories.map(function(subcate){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"chooseOneSubCategory\",value:subcate,onChange:subcategoryChangeHandler}),/*#__PURE__*/_jsx(\"span\",{children:subcate})]});});var subcategoryBody=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"chooseOneSubCategory\",value:\"\",defaultChecked:true,onChange:subcategoryChangeHandler}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0E17\\u0E31\\u0E49\\u0E07\\u0E2B\\u0E21\\u0E14\"}),eachsubcate]});var provinceBody=state.provinces.map(function(province){return/*#__PURE__*/_jsx(\"option\",{children:province});});var indexPrice=0;var priceBody=priceRange.map(function(price){return/*#__PURE__*/_jsx(\"option\",{value:++indexPrice,children:price});});var _useState13=useState(true),_useState14=_slicedToArray(_useState13,2),moreoverShowing=_useState14[0],setMoreoverShowing=_useState14[1];var merchantBody=displayMerchant.map(function(merchant,index){if(moreoverShowing){if(index<5){return/*#__PURE__*/_jsx(Merchant,{merchant:merchant});}}else{return/*#__PURE__*/_jsx(Merchant,{merchant:merchant});}});var moreoverButton;if(displayMerchant.length>4){moreoverButton=/*#__PURE__*/_jsx(\"div\",{className:\"moreoverdiv\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return setMoreoverShowing(!moreoverShowing);},className:\"moreoverbutton\",children:moreoverShowing?\"ดูเพิ่มเติม\":\"ไม่ดูละ\"})});}var leftBody=/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"textHeadLeft\",children:\"\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\\u0E23\\u0E49\\u0E32\\u0E19\\u0E04\\u0E49\\u0E32\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ordinaryText\",children:categoryBody}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"provinceBody\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(FontAwesomeIcon,{style:{color:\"black\"},icon:faMapMarkerAlt})})}),/*#__PURE__*/_jsx(\"div\",{className:\"textHeadLeft2\",children:\"\\u0E08\\u0E31\\u0E07\\u0E2B\\u0E27\\u0E31\\u0E14/\\u0E43\\u0E01\\u0E25\\u0E49\\u0E09\\u0E31\\u0E19 \"}),/*#__PURE__*/_jsxs(\"select\",{className:\"provinceSelector\",onChange:provinceChangeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"\\u0E1E\\u0E37\\u0E49\\u0E19\\u0E17\\u0E35\\u0E48\\u0E43\\u0E01\\u0E25\\u0E49\\u0E09\\u0E31\\u0E19\"}),provinceBody]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"textHeadLeft2\",children:\"\\u0E23\\u0E32\\u0E04\\u0E32 \"}),/*#__PURE__*/_jsxs(\"select\",{className:\"subcateSelector\",onChange:priceChangeHandler,children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"\\u0E01\\u0E23\\u0E38\\u0E13\\u0E32\\u0E40\\u0E25\\u0E37\\u0E2D\\u0E01\"}),priceBody]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"textHeadLeft2\",children:[\" \\u0E1B\\u0E23\\u0E30\\u0E40\\u0E20\\u0E17\",categoryNameNow,\" \"]}),/*#__PURE__*/_jsx(\"div\",{className:\"ordinaryText\",children:subcategoryBody})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"leftBody\",children:leftBody}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightBody\",children:[merchantBody,moreoverButton]}),/*#__PURE__*/_jsxs(Modal,{isOpen:state.modalIsOpen// shouldCloseOnOverlayClick={false}\n,onRequestClose:function onRequestClose(){return setState(_objectSpread(_objectSpread({},state),{},{modalIsOpen:false}));},style:{overlay:{zIndex:\"20\"},content:{background:\"white\",borderRadius:\"10px\"}},children:[leftBody,/*#__PURE__*/_jsx(\"div\",{className:\"modalCloseButtonContainer\",children:/*#__PURE__*/_jsx(\"button\",{className:\"modalCloseButton\",onClick:function onClick(){return setState(_objectSpread(_objectSpread({},state),{},{modalIsOpen:false}));},children:\"\\u0E1B\\u0E34\\u0E14\"})})]})]});}export default Body;","map":{"version":3,"sources":["/Users/birddddddddd/Desktop/ywc-web/src/components/Body.js"],"names":["React","useState","useEffect","useContext","webData","Merchant","UserContext","faMapMarkerAlt","FontAwesomeIcon","Modal","Body","categories","priceRange","merchants","allCate","i","length","j","subcategories","push","categoryNameNow","setCategoryNameNow","categoryNow","setCategoryNow","name","allCategory","setAllCategory","subcategoryNameNow","setSubcategoryNameNow","priceSelected","setPriceSelected","displayMerchant","setDisplayMerchant","state","setState","filter","merchant","shopNameTH","toLowerCase","includes","search","subcategoryName","display","map","priceLevel","toString","provinceSelected","addressProvinceName","categoryChangeHandler","e","target","value","subcategoryChangeHandler","provinceChangeHandler","priceChangeHandler","eachCate","category","categoryBody","eachsubcate","subcate","subcategoryBody","provinceBody","provinces","province","indexPrice","priceBody","price","moreoverShowing","setMoreoverShowing","merchantBody","index","moreoverButton","leftBody","color","modalIsOpen","overlay","zIndex","content","background","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { webData } from \"../data\";\nimport \"./Body.css\";\nimport Merchant from \"./Merchant\";\nimport { UserContext } from \"../UserContext\";\nimport { faMapMarkerAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Modal from \"react-modal\";\n\nfunction Body() {\n  // from JSON\n  const categories = webData.categories;\n  // const provinces = webData.provinces;\n  const priceRange = webData.priceRange;\n  const merchants = webData.merchants;\n\n  // set all cate\n  let allCate = [];\n  for (let i = 0; i < webData.categories.length; i++) {\n    if (webData.categories.length > 1) {\n      for (let j = 0; j < webData.categories[i].subcategories.length; j++) {\n        allCate.push(webData.categories[i].subcategories[j]);\n      }\n    }\n  }\n\n  // States\n  const [categoryNameNow, setCategoryNameNow] = useState();\n  const [categoryNow, setCategoryNow] = useState(webData.categories[0]);\n  const [allCategory, setAllCategory] = useState({\n    name: \"ทั้งหมด\",\n    subcategories: allCate\n  });\n\n  const [subcategoryNameNow, setSubcategoryNameNow] = useState(\"\");\n  const [priceSelected, setPriceSelected] = useState(\"0\");\n\n  const [displayMerchant, setDisplayMerchant] = useState(webData.merchants);\n\n  const { state, setState } = useContext(UserContext);\n\n  useEffect(() => {\n    setDisplayMerchant(\n      webData.merchants.filter(merchant => {\n        return merchant.shopNameTH\n          .toLowerCase()\n          .includes(state.search.toLowerCase());\n      })\n    );\n  }, [state.search]);\n\n  useEffect(() => {\n    setDisplayMerchant(\n      webData.merchants.filter(merchant => {\n        return merchant.subcategoryName\n          .toLowerCase()\n          .includes(subcategoryNameNow.toLowerCase());\n      })\n    );\n  }, [subcategoryNameNow]);\n\n  // display subcategoy for each categotry you chose\n  useEffect(() => {\n    switch (categoryNameNow) {\n      case \"ร้านอาหารและเครื่องดื่ม\":\n        setCategoryNow(webData.categories[0]);\n        break;\n\n      case \"ร้านค้า OTOP\":\n        setCategoryNow(webData.categories[1]);\n        break;\n\n      case \"ร้านธงฟ้า\":\n        setCategoryNow(webData.categories[2]);\n        break;\n\n      case \"สินค้าทั่วไป\":\n        setCategoryNow(webData.categories[3]);\n        break;\n\n      default:\n        setCategoryNow(allCategory);\n    }\n  }, [categoryNameNow]);\n\n  useEffect(() => {\n    let display = [];\n    if (priceSelected === \"0\") {\n      webData.merchants.map(merchant => {\n        display.push(merchant);\n      });\n    } else {\n      merchants.map(merchant => {\n        if (priceSelected === merchant.priceLevel.toString()) {\n          display.push(merchant);\n        }\n      });\n    }\n    setDisplayMerchant(display);\n  }, [priceSelected]);\n\n  useEffect(() => {\n    let display = [];\n\n    if (state.provinceSelected === \"0\") {\n      webData.merchants.map(merchant => {\n        display.push(merchant);\n      });\n    } else {\n      merchants.map(merchant => {\n        if (state.provinceSelected === merchant.addressProvinceName) {\n          display.push(merchant);\n        }\n      });\n    }\n    setDisplayMerchant(display);\n  }, [state.provinceSelected]);\n\n  const categoryChangeHandler = e => {\n    setCategoryNameNow(e.target.value);\n  };\n\n  const subcategoryChangeHandler = e => {\n    setSubcategoryNameNow(e.target.value);\n  };\n\n  const provinceChangeHandler = e => {\n    setState({ ...state, provinceSelected: e.target.value });\n  };\n\n  const priceChangeHandler = e => {\n    setPriceSelected(e.target.value);\n  };\n\n  let eachCate = categories.map(category => {\n    return (\n      <div>\n        <input\n          type=\"radio\"\n          name=\"chooseOneCategory\"\n          value={category.name}\n          onChange={categoryChangeHandler}\n        ></input>\n        <span>{category.name}</span>\n      </div>\n    );\n  });\n\n  let categoryBody = (\n    <div>\n      <input\n        type=\"radio\"\n        name=\"chooseOneCategory\"\n        value=\"\"\n        onChange={categoryChangeHandler}\n        defaultChecked\n      ></input>\n      <span>ทั้งหมด</span>\n      {eachCate}\n    </div>\n  );\n\n  let eachsubcate;\n  eachsubcate = categoryNow.subcategories.map(subcate => {\n    return (\n      <div>\n        <input\n          type=\"radio\"\n          name=\"chooseOneSubCategory\"\n          value={subcate}\n          onChange={subcategoryChangeHandler}\n        ></input>\n        <span>{subcate}</span>\n      </div>\n    );\n  });\n\n  let subcategoryBody = (\n    <div>\n      <input\n        type=\"radio\"\n        name=\"chooseOneSubCategory\"\n        value=\"\"\n        defaultChecked\n        onChange={subcategoryChangeHandler}\n      ></input>\n      <span>ทั้งหมด</span>\n      {eachsubcate}\n    </div>\n  );\n\n  let provinceBody = state.provinces.map(province => {\n    return <option>{province}</option>;\n  });\n\n  let indexPrice = 0;\n  let priceBody = priceRange.map(price => {\n    return <option value={++indexPrice}>{price}</option>;\n  });\n\n  const [moreoverShowing, setMoreoverShowing] = useState(true);\n\n  let merchantBody = displayMerchant.map((merchant, index) => {\n    if (moreoverShowing) {\n      if (index < 5) {\n        return <Merchant merchant={merchant}></Merchant>;\n      }\n    } else {\n      return <Merchant merchant={merchant}></Merchant>;\n    }\n  });\n\n  let moreoverButton;\n  if (displayMerchant.length > 4) {\n    moreoverButton = (\n      <div className=\"moreoverdiv\">\n        <button\n          onClick={e => setMoreoverShowing(!moreoverShowing)}\n          className=\"moreoverbutton\"\n        >\n          {moreoverShowing ? \"ดูเพิ่มเติม\" : \"ไม่ดูละ\"}\n        </button>\n      </div>\n    );\n  }\n\n  let leftBody = (\n    <div>\n      <div className=\"textHeadLeft\">ประเภทร้านค้า</div>\n      <div className=\"ordinaryText\">{categoryBody}</div>\n      <div>\n        <div className=\"provinceBody\">\n          <div>\n            <FontAwesomeIcon style={{ color: \"black\" }} icon={faMapMarkerAlt} />\n          </div>\n        </div>\n        <div className=\"textHeadLeft2\">จังหวัด/ใกล้ฉัน </div>\n        <select className=\"provinceSelector\" onChange={provinceChangeHandler}>\n          <option value=\"0\">พื้นที่ใกล้ฉัน</option>\n          {provinceBody}\n        </select>\n      </div>\n\n      <div>\n        <div className=\"textHeadLeft2\">ราคา </div>\n        <select className=\"subcateSelector\" onChange={priceChangeHandler}>\n          <option value=\"0\">กรุณาเลือก</option>\n          {priceBody}\n        </select>\n      </div>\n\n      <div>\n        <div className=\"textHeadLeft2\"> ประเภท{categoryNameNow} </div>\n        <div className=\"ordinaryText\">{subcategoryBody}</div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"grid\">\n      <div className=\"leftBody\">{leftBody}</div>\n      <div className=\"rightBody\">\n        {merchantBody}\n        {moreoverButton}\n      </div>\n\n      <Modal\n        isOpen={state.modalIsOpen}\n        // shouldCloseOnOverlayClick={false}\n        onRequestClose={() => setState({ ...state, modalIsOpen: false })}\n        style={{\n          overlay: {\n            zIndex: \"20\"\n          },\n          content: {\n            background: \"white\",\n            borderRadius: \"10px\"\n          }\n        }}\n      >\n        {leftBody}\n        <div className=\"modalCloseButtonContainer\">\n          <button\n            className=\"modalCloseButton\"\n            onClick={() => setState({ ...state, modalIsOpen: false })}\n          >\n            ปิด\n          </button>\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default Body;\n"]},"metadata":{},"sourceType":"module"}